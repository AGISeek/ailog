# Watch Cursor AI Attribution Helper

This Visual Studio Code extension helps track code generated by Cursor AI and attribute it in your Git commits, following the "Human-in-the-loop" principle.

## How It Works

This system consists of two parts:

1.  **The VS Code Extension**: 
    - It runs in the background, listening for text changes in the editor.
    - It uses heuristics (like the speed and size of code insertions) to detect activity that is likely from an AI assistant like Cursor.
    - When it detects a high-confidence AI-like change, it logs the file path and a timestamp to a temporary file at `.git/ai_activity.log`.

2.  **The Git Hook**:
    - A `prepare-commit-msg` hook that you install in your local repository.
    - When you run `git commit`, this hook automatically triggers.
    - It checks which files you have staged for the commit.
    - It compares the staged files against the `.git/ai_activity.log`.
    - If a match is found, it prompts you directly in your terminal, asking if you want to add a `Co-authored-by: Cursor AI` trailer to your commit message.
    - The log is cleared after each commit to ensure fresh detection for the next one.

This ensures that attribution is accurate (you have the final say) and the process is seamless (you just have to answer Y/n).

## Setup Instructions

### Step 1: Install Dependencies

You need to have Node.js and npm installed. Open the project folder in your terminal and run:

```bash
npm install
```

### Step 2: Run the Extension

1.  Open the `watch-cursor` folder in Visual Studio Code.
2.  Press `F5` to open a new Extension Development Host window. The extension is now running in this new window.

### Step 3: Install the Git Hook

1.  In the **Extension Development Host** window (the one that opened after you pressed F5), open a project that uses Git.
2.  Open the Command Palette (`Cmd+Shift+P` on macOS, `Ctrl+Shift+P` on Windows).
3.  Type `Watch Cursor` and select the command **"Watch Cursor: Install Git Hook for AI Attribution"**.
4.  You should see a confirmation message that the hook was installed successfully.

### Step 4: Test the Workflow

1.  In the project where you installed the hook, use Cursor to generate a significant piece of code (e.g., a new function or class).
2.  Save the file.
3.  Stage the file using `git add <file_path>`.
4.  Commit the change using `git commit`.
5.  You should see the following prompt in your terminal:
    ```
    [AI Assistant] AI-generated code detected in this commit.
    > Do you want to add 'Co-authored-by: Cursor AI' to this commit? (Y/n)
    ```
6.  Press `Y` or `Enter`. Your commit message editor will open with the `Co-authored-by` trailer already added.

This completes the setup. The extension will now monitor your work, and the hook will prompt you whenever it detects that you're committing AI-assisted code.
